<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./index.css">
    <title>Speak Up</title>
</head>

<body>
    <div class="wrapper">
        <div class="lang-select">
            <div class="lang lang-active" id="ua">
                <p class="lang-text">UA</p>
            </div>
            <div class="lang" id="ru">
                <p class="lang-text">RU</p>
            </div>
            <div class="lang" id="en">
                <p class="lang-text">EN</p>
            </div>
        </div>
        <div class="speak-up-logo-container">
            <img src="./SpeakUpLogo.png" alt="Speak Up Logo" class="speak-up-logo">
        </div>
        <h1 class="heading" id="heading">Дізнайся більше про Speak Up Metaverse, зареєструйся на безкоштовний пробний
            урок!</h1>
        <form class="form" action="https://getform.io/f/af844574-d827-4a0d-adb6-8540141cbb57" method="POST" id="form">
            <input class="input" type="text" id="input1" name="name" placeholder="Ваше ім'я та прізвище (Обов'язково)">
            <input class="input" type="text" id="input2" name="phone" placeholder="Ваш номер телефону (Обов'язково)">
            <input class="input" type="text" id="input3" name="email" placeholder="Ваша електронна пошта (За бажанням)">
            <button type="button" class="btn submit-btn" id="submit-btn">Зареєструватися</button>
        </form>
        <div class="dialogue" id="dialogue-success">
            <p class="dialogue-text" id="dialogue-success-text">Дякуємо за реестрацію на пробний урок, з вами скоро
                зв'яжеться
                консультант</p>
        </div>
        <div class="dialogue" id="dialogue-fail">
            <p class="dialogue-text" id="dialogue-fail-text">Будь ласка, заповніть всі поля, необхідні для реєстрації
                (Ім'я та номер телефону)
            </p>
        </div>
    </div>
    <script src="./index.js"></script>
    <script>
        submitBtn.addEventListener( 'click', () =>
        {
            event.preventDefault();
            if ( input1.value && input2.value )
            {
                form = document.getElementById( 'form' );
                const data = new URLSearchParams();
                for ( const pair of new FormData( form ) )
                {
                    data.append( pair[ 0 ], pair[ 1 ] );
                }

                fetch( 'https://getform.io/f/9fe23f35-072f-493a-ade5-7bbabd1d2ee0', {
                    method: 'post',
                    body: data,
                } )

                // this doesn't work properly yet
                //
                //     .catch( e )
                // {
                //     console.log( 'oops' );
                //     dialogueTime.style.display = 'block';
                //     setTimeout( () =>
                //     {
                //         dialogueTime.classList.add( 'dialogue-active' );
                //     }, 1 );
                //     setTimeout( () =>
                //     {
                //         dialogueTime.classList.remove( 'dialogue-active' );
                //         setTimeout( () =>
                //         {
                //             dialogueTime.style.display = 'none';
                //         }, 1000 );
                //     }, 5000 );
                // }
                input1.value = '';
                input2.value = '';
                input3.value = '';
                dialogueSuccess.style.display = 'block';
                setTimeout( () =>
                {
                    dialogueSuccess.classList.add( 'dialogue-active' );
                }, 1 );
                setTimeout( () =>
                {
                    dialogueSuccess.classList.remove( 'dialogue-active' );
                    setTimeout( () =>
                    {
                        dialogueSuccess.style.display = 'none';
                    }, 1000 );
                }, 5000 );
            } else
            {
                dialogueFail.style.display = 'block';
                setTimeout( () =>
                {
                    dialogueFail.classList.add( 'dialogue-active' );
                }, 1 );
                setTimeout( () =>
                {
                    dialogueFail.classList.remove( 'dialogue-active' );
                    setTimeout( () =>
                    {
                        dialogueFail.style.display = 'none';
                    }, 1000 );
                }, 5000 );
            }
        } );
    </script>
</body>

</html>
